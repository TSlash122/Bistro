var AWSCPanorama=function(x){"use strict";var g,b,V,M,B,y=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},w=function(n){if(document.readyState==="loading")return"loading";var e=y();if(e){if(n<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||n<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||n<e.domComplete)return"dom-content-loaded"}return"complete"},en=function(n){var e=n.nodeName;return n.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},F=function(n,e){var i="";try{for(;n&&n.nodeType!==9;){var r=n,t=r.id?"#"+r.id:en(r)+(r.className&&r.className.length?"."+r.className.replace(/\s+/g,"."):"");if(i.length+t.length>(e||100)-1)return i||t;if(i=i?t+">"+i:t,r.id)break;n=r.parentNode}}catch{}return i},W=-1,H=function(){return W},h=function(n){addEventListener("pageshow",function(e){e.persisted&&(W=e.timeStamp,n(e))},!0)},A=function(){var n=y();return n&&n.activationStart||0},l=function(n,e){var i=y(),r="navigate";return H()>=0?r="back-forward-cache":i&&(r=document.prerendering||A()>0?"prerender":document.wasDiscarded?"restore":i.type.replace(/_/g,"-")),{name:n,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},T=function(n,e,i){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var r=new PerformanceObserver(function(t){Promise.resolve().then(function(){e(t.getEntries())})});return r.observe(Object.assign({type:n,buffered:!0},i||{})),r}}catch{}},m=function(n,e,i,r){var t,a;return function(u){e.value>=0&&(u||r)&&((a=e.value-(t||0))||t===void 0)&&(t=e.value,e.delta=a,e.rating=function(o,c){return o>c[1]?"poor":o>c[0]?"needs-improvement":"good"}(e.value,i),n(e))}},k=function(n){requestAnimationFrame(function(){return requestAnimationFrame(function(){return n()})})},P=function(n){var e=function(i){i.type!=="pagehide"&&document.visibilityState!=="hidden"||n(i)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},N=function(n){var e=!1;return function(i){e||(n(i),e=!0)}},S=-1,j=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},I=function(n){document.visibilityState==="hidden"&&S>-1&&(S=n.type==="visibilitychange"?n.timeStamp:0,tn())},U=function(){addEventListener("visibilitychange",I,!0),addEventListener("prerenderingchange",I,!0)},tn=function(){removeEventListener("visibilitychange",I,!0),removeEventListener("prerenderingchange",I,!0)},R=function(){return S<0&&(S=j(),U(),h(function(){setTimeout(function(){S=j(),U()},0)})),{get firstHiddenTime(){return S}}},C=function(n){document.prerendering?addEventListener("prerenderingchange",function(){return n()},!0):n()},z=function(n,e){e=e||{},C(function(){var i,r=[1800,3e3],t=R(),a=l("FCP"),u=T("paint",function(o){o.forEach(function(c){c.name==="first-contentful-paint"&&(u.disconnect(),c.startTime<t.firstHiddenTime&&(a.value=Math.max(c.startTime-A(),0),a.entries.push(c),i(!0)))})});u&&(i=m(n,a,r,e.reportAllChanges),h(function(o){a=l("FCP"),i=m(n,a,r,e.reportAllChanges),k(function(){a.value=performance.now()-o.timeStamp,i(!0)})}))})},rn=function(n,e){(function(i,r){r=r||{},z(N(function(){var t,a=[.1,.25],u=l("CLS",0),o=0,c=[],s=function(v){v.forEach(function(f){if(!f.hadRecentInput){var E=c[0],Tn=c[c.length-1];o&&f.startTime-Tn.startTime<1e3&&f.startTime-E.startTime<5e3?(o+=f.value,c.push(f)):(o=f.value,c=[f])}}),o>u.value&&(u.value=o,u.entries=c,t())},d=T("layout-shift",s);d&&(t=m(i,u,a,r.reportAllChanges),P(function(){s(d.takeRecords()),t(!0)}),h(function(){o=0,u=l("CLS",0),t=m(i,u,a,r.reportAllChanges),k(function(){return t()})}),setTimeout(t,0))}))})(function(i){(function(r){if(r.entries.length){var t=r.entries.reduce(function(o,c){return o&&o.value>c.value?o:c});if(t&&t.sources&&t.sources.length){var a=(u=t.sources).find(function(o){return o.node&&o.node.nodeType===1})||u[0];if(a)return void(r.attribution={largestShiftTarget:F(a.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:a,largestShiftEntry:t,loadState:w(t.startTime)})}}var u;r.attribution={}})(i),n(i)},e)},an=function(n,e){z(function(i){(function(r){if(r.entries.length){var t=y(),a=r.entries[r.entries.length-1];if(t){var u=t.activationStart||0,o=Math.max(0,t.responseStart-u);return void(r.attribution={timeToFirstByte:o,firstByteToFCP:r.value-o,loadState:w(r.entries[0].startTime),navigationEntry:t,fcpEntry:a})}}r.attribution={timeToFirstByte:0,firstByteToFCP:r.value,loadState:w(H())}})(i),n(i)},e)},L={passive:!0,capture:!0},on=new Date,G=function(n,e){g||(g=e,b=n,V=new Date,K(removeEventListener),J())},J=function(){if(b>=0&&b<V-on){var n={entryType:"first-input",name:g.type,target:g.target,cancelable:g.cancelable,startTime:g.timeStamp,processingStart:g.timeStamp+b};M.forEach(function(e){e(n)}),M=[]}},un=function(n){if(n.cancelable){var e=(n.timeStamp>1e12?new Date:performance.now())-n.timeStamp;n.type=="pointerdown"?function(i,r){var t=function(){G(i,r),u()},a=function(){u()},u=function(){removeEventListener("pointerup",t,L),removeEventListener("pointercancel",a,L)};addEventListener("pointerup",t,L),addEventListener("pointercancel",a,L)}(e,n):G(e,n)}},K=function(n){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return n(e,un,L)})},cn=function(n,e){e=e||{},C(function(){var i,r=[100,300],t=R(),a=l("FID"),u=function(s){s.startTime<t.firstHiddenTime&&(a.value=s.processingStart-s.startTime,a.entries.push(s),i(!0))},o=function(s){s.forEach(u)},c=T("first-input",o);i=m(n,a,r,e.reportAllChanges),c&&P(N(function(){o(c.takeRecords()),c.disconnect()})),c&&h(function(){var s;a=l("FID"),i=m(n,a,r,e.reportAllChanges),M=[],b=-1,g=null,K(addEventListener),s=u,M.push(s),J()})})},sn=function(n,e){cn(function(i){(function(r){var t=r.entries[0];r.attribution={eventTarget:F(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:w(t.startTime)}})(i),n(i)},e)},Q=0,_=1/0,D=0,fn=function(n){n.forEach(function(e){e.interactionId&&(_=Math.min(_,e.interactionId),D=Math.max(D,e.interactionId),Q=D?(D-_)/7+1:0)})},X=function(){return B?Q:performance.interactionCount||0},dn=function(){"interactionCount"in performance||B||(B=T("event",fn,{type:"event",buffered:!0,durationThreshold:0}))},Y=0,Z=function(){return X()-Y},p=[],q={},$=function(n){var e=p[p.length-1],i=q[n.interactionId];if(i||p.length<10||n.duration>e.latency){if(i)i.entries.push(n),i.latency=Math.max(i.latency,n.duration);else{var r={id:n.interactionId,latency:n.duration,entries:[n]};q[r.id]=r,p.push(r)}p.sort(function(t,a){return a.latency-t.latency}),p.splice(10).forEach(function(t){delete q[t.id]})}},ln=function(n,e){e=e||{},C(function(){var i=[200,500];dn();var r,t=l("INP"),a=function(o){o.forEach(function(d){d.interactionId&&$(d),d.entryType==="first-input"&&!p.some(function(v){return v.entries.some(function(f){return d.duration===f.duration&&d.startTime===f.startTime})})&&$(d)});var c,s=(c=Math.min(p.length-1,Math.floor(Z()/50)),p[c]);s&&s.latency!==t.value&&(t.value=s.latency,t.entries=s.entries,r())},u=T("event",a,{durationThreshold:e.durationThreshold||40});r=m(n,t,i,e.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),P(function(){a(u.takeRecords()),t.value<0&&Z()>0&&(t.value=0,t.entries=[]),r(!0)}),h(function(){p=[],Y=X(),t=l("INP"),r=m(n,t,i,e.reportAllChanges)}))})},mn=function(n,e){ln(function(i){(function(r){if(r.entries.length){var t=r.entries.sort(function(a,u){return u.duration-a.duration||u.processingEnd-u.processingStart-(a.processingEnd-a.processingStart)})[0];r.attribution={eventTarget:F(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:w(t.startTime)}}else r.attribution={}})(i),n(i)},e)},O={},vn=function(n,e){(function(i,r){r=r||{},C(function(){var t,a=[2500,4e3],u=R(),o=l("LCP"),c=function(v){var f=v[v.length-1];if(f){var E=Math.max(f.startTime-A(),0);E<u.firstHiddenTime&&(o.value=E,o.entries=[f],t())}},s=T("largest-contentful-paint",c);if(s){t=m(i,o,a,r.reportAllChanges);var d=N(function(){O[o.id]||(c(s.takeRecords()),s.disconnect(),O[o.id]=!0,t(!0))});["keydown","click"].forEach(function(v){addEventListener(v,d,!0)}),P(d),h(function(v){o=l("LCP"),t=m(i,o,a,r.reportAllChanges),k(function(){o.value=performance.now()-v.timeStamp,O[o.id]=!0,t(!0)})})}})})(function(i){(function(r){if(r.entries.length){var t=y();if(t){var a=t.activationStart||0,u=r.entries[r.entries.length-1],o=u.url&&performance.getEntriesByType("resource").filter(function(E){return E.name===u.url})[0],c=Math.max(0,t.responseStart-a),s=Math.max(c,o?(o.requestStart||o.startTime)-a:0),d=Math.max(s,o?o.responseEnd-a:0),v=Math.max(d,u?u.startTime-a:0),f={element:F(u.element),timeToFirstByte:c,resourceLoadDelay:s-c,resourceLoadTime:d-s,elementRenderDelay:v-d,navigationEntry:t,lcpEntry:u};return u.url&&(f.url=u.url),o&&(f.lcpResourceEntry=o),void(r.attribution=f)}}r.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:r.value}})(i),n(i)},e)},pn=function n(e){document.prerendering?C(function(){return n(e)}):document.readyState!=="complete"?addEventListener("load",function(){return n(e)},!0):setTimeout(e,0)},gn=function(n,e){e=e||{};var i=[800,1800],r=l("TTFB"),t=m(n,r,i,e.reportAllChanges);pn(function(){var a=y();if(a){var u=a.responseStart;if(u<=0||u>performance.now())return;r.value=Math.max(u-A(),0),r.entries=[a],t(!0),h(function(){r=l("TTFB",0),(t=m(n,r,i,e.reportAllChanges))(!0)})}})},hn=function(n,e){gn(function(i){(function(r){if(r.entries.length){var t=r.entries[0],a=t.activationStart||0,u=Math.max(t.domainLookupStart-a,0),o=Math.max(t.connectStart-a,0),c=Math.max(t.requestStart-a,0);r.attribution={waitingTime:u,dnsTime:o-u,connectionTime:c-o,requestTime:r.value-c,navigationEntry:t}}else r.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}})(i),n(i)},e)};function nn(){var t;let{frame:n=window.frameElement,frameId:e=n.id}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!((t=window.parent)!=null&&t.postMessage)){console.error("window.parent or window.parent.postMessage is falsy, web-vitals metrics won't be sent");return}rn(i,{reportAllChanges:!0}),sn(i),vn(i),an(i),hn(i),mn(i);function i(a){var c;const{name:u,delta:o}=a;try{window.parent.postMessage({event_id:"iFrame_Panorama_WebVital",metric:{name:u,delta:o,element:a.name==="LCP"?(c=a.attribution)==null?void 0:c.element:void 0},frameMetaData:{id:e,name:n==null?void 0:n.name,src:n==null?void 0:n.src,navigationStart:yn()}},"*")}catch(s){r(s)}}function r(a){window.parent.postMessage({event_id:"iFrame_Panorama_Error",error:a},"*")}}function yn(){return performance.timeOrigin?Math.round(performance.timeOrigin):performance.timing.navigationStart}return nn(),x.initFrameWebVitalsMetrics=nn,Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),x}({});
